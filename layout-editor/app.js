var g,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ba;if("function"==typeof Object.setPrototypeOf)ba=Object.setPrototypeOf;else{var ca;a:{var da={la:!0},ea={};try{ea.__proto__=da;ca=ea.la;break a}catch(a){}ca=!1}ba=ca?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var fa=ba;
function l(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(fa)fa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c]}var m=this||self;function ha(a,b,c){return Object.prototype.hasOwnProperty.call(a,b)?a[b]:a[b]=c(b)};function ia(a){return ha(a.prototype,"$$generatedClassName",function(){return"Class$obf_"+{valueOf:function(){return++ja}}})}var ja=1E3;function n(){}n.prototype.C=function(a){return p(this,a)};n.prototype.A=function(){return ka(this)};n.prototype.toString=function(){return q(la(ma(this.constructor)))+"@"+q((this.A()>>>0).toString(16))};function na(){}l(na,n);na.prototype.c=function(a){this.a=a;if(a instanceof Object)try{a.na=this}catch(b){}};function oa(a){a.a instanceof Error&&(Error.captureStackTrace?Error.captureStackTrace(a.a):a.a.stack=Error().stack)}na.prototype.toString=function(){var a=la(ma(this.constructor)),b=this.b;return null==b?a:q(a)+": "+q(b)};function pa(){}l(pa,na);function qa(){}l(qa,pa);function ra(){}l(ra,qa);function sa(){}l(sa,ra);function p(a,b){return Object.is(a,b)||null==a&&null==b};function ka(a){return a.ba||(Object.defineProperties(a,{ba:{value:++ta,enumerable:!1}}),a.ba)}var ta=0;var ua;function va(){va=function(){};ua=wa([256],r,xa,r.a)};function t(a){return Math.max(Math.min(a,2147483647),-2147483648)|0};function ya(){}l(ya,n);function r(){this.G=0}l(r,ya);function za(a){if(-129<a&&128>a){var b=a+128|0,c=(va(),ua)[b];c||(c=ua[b]=Aa(a));return c}return Aa(a)}function Aa(a){var b=new r;b.G=a;return b}r.prototype.C=function(a){return xa(a)&&a.G==this.G};r.prototype.A=function(){return this.G};r.prototype.toString=function(){return""+this.G};function xa(a){return a instanceof r};function wa(a,b,c,d){return Ba(a,d,{V:b,ea:c,T:a.length})}function Ba(a,b,c){var d=a[0];if(null==d)return null;var e=[];c&&(e.S=c);if(1<a.length){a=a.slice(1);c=c&&{V:c.V,ea:c.ea,T:c.T-1};for(var f=0;f<d;f++)e[f]=Ba(a,b,c)}else if(void 0!==b)for(a=0;a<d;a++)e[a]=b;else e.length=d;return e};function Ca(a){this.b=a}l(Ca,n);Ca.prototype.a=function(a,b){var c;return c=this.b,c(a,b)};function Da(){}l(Da,n);Da.prototype.a=function(a,b){var c=typeof a;"number"==c?b=Ea(a,b):"boolean"==c?b=a==b?0:a?1:-1:"string"==c?b=a==b?0:a<b?-1:1:(a=a.G,b=b.G,b=a<b?-1:a>b?1:0);return b};var Fa;function Ga(){Ga=function(){};Fa=new Da};function u(a,b){var c;!(c=p(a,b))&&(c=null!=a)&&(c=a.C?a.C(b):Object.is(a,b));return c}function w(a){return null!=a?Ha(a):0};function Ia(){this.h=this.f=0}l(Ia,n);Ia.prototype.b=function(){return this.f<this.i.a.length};Ia.prototype.a=function(){var a;this.b();this.h=(a=this.f,this.f=this.f+1|0,a);return this.i.a[this.h]};Ia.prototype.c=function(){this.i.R(this.f=this.h);this.h=-1};function Ja(a,b){a.S=b.S;return a};function Ka(){}l(Ka,n);g=Ka.prototype;g.add=function(){throw La("Add not supported on this collection").a;};g.X=function(a){var b=!1;for(a=a.g();a.b();){var c=a.a();b=!!(+b|+this.add(c))}};g.s=function(){for(var a=this.g();a.b();)a.a(),a.c()};g.u=function(a){return Ma(this,a,!1)};g.O=function(){return 0==this.j()};g.H=function(a){Ma(this,a,!0)};g.ia=function(a){for(var b=this.g();b.b();){var c=b.a();a.u(c)&&b.c()}};g.Z=function(){return this.ha(Array(this.j()))};
g.ha=function(a){var b=this.j();a.length<b&&(a=Ja(Array(b),a));for(var c=a,d=this.g(),e=0;e<b;e=e+1|0){var f=d.a();c[e]=f}a.length>b&&(a[b]=null);return a};g.toString=function(){for(var a=Na("[","]"),b=this.g();b.b();){var c=b.a();Oa(a,p(c,this)?"(this Collection)":q(c))}return a.toString()};function Ma(a,b,c){for(a=a.g();a.b();){var d=a.a();if(u(b,d))return c&&a.c(),!0}return!1};function Pa(){}l(Pa,Ka);g=Pa.prototype;g.add=function(a){this.ca(this.j(),a);return!0};g.ca=function(){throw La("Add not supported on this list").a;};g.s=function(){this.fa(0,this.j())};g.C=function(a){if(p(a,this))return!0;if(null==a||!a.$||this.j()!=a.j())return!1;a=a.g();for(var b=this.g();b.b();){var c=b.a(),d=a.a();if(!u(c,d))return!1}return!0};g.A=function(){for(var a=1,b=this.g();b.b();){var c=b.a();a=Math.imul(31,a)+w(c)|0;a|=0}return a};
g.indexOf=function(a){for(var b=0,c=this.j();b<c;b=b+1|0)if(u(a,this.U(b)))return b;return-1};g.g=function(){var a=new x;a.i=this;a.f=0;a.h=-1;return a};g.lastIndexOf=function(a){for(var b=this.j()-1|0;-1<b;b=b-1|0)if(u(a,this.U(b)))return b;return-1};g.R=function(){throw La("Remove not supported on this list").a;};g.ja=function(){throw La("Set not supported on this list").a;};g.fa=function(a,b){var c=new Qa;c.i=this;c.h=-1;for(c.f=a;a<b;a=a+1|0)c.a(),c.c()};
g.W=function(a){var b=this.Z();Ra(b,b.length,a);for(a=0;a<b.length;a=a+1|0)this.ja(a,b[a])};g.$=!0;function Sa(){}l(Sa,Pa);function Ta(){var a=new Sa;a.a=[];return a}g=Sa.prototype;g.add=function(a){this.a[this.a.length]=a;return!0};g.ca=function(a,b){this.a.splice(a,0,b)};g.X=function(a){var b=a.Z();if(0!=b.length){a=b;var c=this.a,d=this.a.length;b=b.length;var e=0;p(a,c)&&(a=a.slice(e,e+b|0),e=0);var f=e;for(e=e+b|0;f<e;){var k=Math.min(f+1E4|0,e);b=k-f|0;f=a.slice(f,k);f.splice(0,0,d,0);Array.prototype.splice.apply(c,f);f=k;d=d+b|0}}};g.s=function(){this.a=[]};g.u=function(a){return-1!=this.indexOf(a)};
g.U=function(a){return this.a[a]};g.indexOf=function(a){a:{for(var b=0;b<this.a.length;b=b+1|0)if(u(a,this.a[b])){a=b;break a}a=-1}return a};g.g=function(){var a=new Ia;a.i=this;a.f=0;a.h=-1;return a};g.O=function(){return 0==this.a.length};g.lastIndexOf=function(a){a:{for(var b=this.j()-1|0;0<=b;b=b-1|0)if(u(a,this.a[b])){a=b;break a}a=-1}return a};g.R=function(a){this.a.splice(a,1)};g.H=function(a){a=this.indexOf(a);-1!=a&&this.R(a)};g.ja=function(a,b){this.a[a]=b};g.j=function(){return this.a.length};
g.W=function(a){var b=this.a,c=this.a.length,d=b.length;if(0>c)throw d=new Ua,d.b="fromIndex: 0 > toIndex: "+c,oa(d),d.c(Error(d)),d.a;if(c>d)throw a=new sa,a.b="fromIndex: 0, toIndex: "+c+", length: "+d,oa(a),a.c(Error(a)),a.a;Ra(b,c,a)};g.Z=function(){var a=this.a;return Ja(a.slice(0,this.a.length),a)};g.ha=function(a){var b=this.a.length;a.length<b&&(a=Ja(Array(b),a));for(var c=0;c<b;c=c+1|0)a[c]=this.a[c];a.length>b&&(a[b]=null);return a};g.fa=function(a,b){this.a.splice(a,b-a|0)};g.$=!0;function y(){}l(y,Ka);y.prototype.C=function(a){if(p(a,this))return!0;if(null==a||!a.aa)return!1;if(a.j()!=this.j())a=!1;else a:{for(a=a.g();a.b();){var b=a.a();if(!this.u(b)){a=!1;break a}}a=!0}return a};y.prototype.A=function(){return Va(this)};y.prototype.ia=function(a){if(this.j()<a.j())for(var b=this.g();b.b();){var c=b.a();a.u(c)&&b.c()}else for(a=a.g();a.b();)b=a.a(),this.H(b)};y.prototype.aa=!0;function Wa(){}l(Wa,n);Wa.prototype.b=function(){return this.f.b()};Wa.prototype.a=function(){return this.f.a().m()};Wa.prototype.c=function(){this.f.c()};function Xa(){}l(Xa,y);g=Xa.prototype;g.s=function(){this.a.I()};g.u=function(a){return this.a.F(a)};g.g=function(){var a=this.a.B().g(),b=new Wa;b.f=a;return b};g.H=function(a){this.a.F(a)&&this.a.L(a)};g.j=function(){return this.a.D()};function Ya(){}l(Ya,n);Ya.prototype.b=function(){return this.f.b()};Ya.prototype.a=function(){return this.f.a().o()};Ya.prototype.c=function(){this.f.c()};function z(){}l(z,Ka);z.prototype.s=function(){this.a.I()};z.prototype.u=function(a){return this.a.da(a)};z.prototype.g=function(){var a=this.a.B().g(),b=new Ya;b.f=a;return b};z.prototype.j=function(){return this.a.D()};function Za(){}l(Za,n);g=Za.prototype;g.m=function(){return this.b};g.o=function(){return this.a};g.ga=function(a){var b=this.a;this.a=a;return b};g.C=function(a){return null!=a&&a.M?u(this.b,a.m())&&u(this.a,a.o()):!1};g.A=function(){return w(this.b)^w(this.a)};g.toString=function(){return q(this.b)+"="+q(this.a)};g.M=!0;function $a(){}l($a,Za);function ab(a,b){var c=new $a;c.b=a;c.a=b;return c};function bb(){}l(bb,n);bb.prototype.toString=function(){return this.a};function cb(){}l(cb,bb);function db(){}l(db,n);function Na(a,b){var c=new db;c.f=", ".toString();c.c=a.toString();c.b=b.toString();c.h=q(c.c)+q(c.b);return c}function Oa(a,b){if(a.a){var c=a.a,d=a.f;c.a=q(c.a)+q(d)}else c=new cb,c.a=a.c,a.a=c;a=a.a;a.a=q(a.a)+q(b)}db.prototype.toString=function(){var a;this.a?a=0==this.b.length?this.a.toString():q(this.a.toString())+q(this.b):a=this.h;return a};function eb(){}l(eb,n);g=eb.prototype;g.I=function(){this.B().s()};g.F=function(a){return!!fb(this,a,!1)};g.da=function(a){for(var b=this.B().g();b.b();){var c=b.a().o();if(u(a,c))return!0}return!1};function gb(a,b){var c=b.m();b=b.o();var d=a.get(c);return!u(b,d)||null==d&&!a.F(c)?!1:!0}g.C=function(a){if(p(a,this))return!0;if(null==a||!a.ka||this.D()!=a.D())return!1;for(a=a.B().g();a.b();){var b=a.a();if(!gb(this,b))return!1}return!0};g.get=function(a){return hb(fb(this,a,!1))};g.A=function(){return Va(this.B())};
g.ma=function(){var a=new Xa;a.a=this;return a};g.K=function(){throw La("Put not supported on this map").a;};g.L=function(a){hb(fb(this,a,!0))};g.D=function(){return this.B().j()};g.toString=function(){for(var a=Na("{","}"),b=this.B().g();b.b();){var c=b.a();c=q(ib(this,c.m()))+"="+q(ib(this,c.o()));Oa(a,c)}return a.toString()};function ib(a,b){return p(b,a)?"(this Map)":q(b)}g.values=function(){var a=new z;a.a=this;return a};function hb(a){return a?a.o():null}
function fb(a,b,c){for(a=a.B().g();a.b();){var d=a.a();if(u(b,d.m()))return c&&(d=ab(d.m(),d.o()),a.c()),d}return null}g.ka=!0;function jb(){this.h=!1}l(jb,n);jb.prototype.b=function(){return this.h};function lb(a){if(a.f.b())return!0;if(!p(a.f,a.v))return!1;a.f=a.i.a.g();return a.f.b()}jb.prototype.a=function(){this.b();this.l=this.f;var a=this.f.a();this.h=lb(this);return a};jb.prototype.c=function(){this.l.c();this.l=null;this.h=lb(this)};function mb(){}l(mb,y);g=mb.prototype;g.s=function(){this.a.I()};g.u=function(a){return null!=a&&a.M?gb(this.a,a):!1};g.g=function(){var a=new jb;a.i=this.a;a.v=a.i.b.g();a.f=a.v;a.h=lb(a);return a};g.H=function(a){this.u(a)&&this.a.L(a.m())};g.j=function(){return this.a.D()};function nb(){this.f=0}l(nb,n);nb.prototype.b=function(){if(this.f<this.h.length)return!0;var a=this.v.next();return a.done?!1:(this.h=a.value[1],this.f=0,!0)};nb.prototype.a=function(){var a;return this.i=this.h[a=this.f,this.f=this.f+1|0,a]};nb.prototype.c=function(){ob(this.l,this.i.m());0!=this.f&&(this.f=this.f-1|0)};function pb(){this.a=0}l(pb,n);function qb(a,b,c){var d=A(b),e=B(a,d);if(0==e.length)a.b.set(d,e);else if(d=rb(b,e))return d.ga(c);e[e.length]=ab(b,c);a.a=a.a+1|0;return null}function ob(a,b){for(var c=A(b),d=B(a,c),e=0;e<d.length;e=e+1|0){var f=d[e];if(u(b,f.m())){1==d.length?(d.length=0,b=a.b,b["delete"].call(b,c)):d.splice(e,1);a.a=a.a-1|0;f.o();break}}}function rb(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(u(a,d.m()))return d}return null}
pb.prototype.g=function(){var a=new nb;a.l=this;a.v=a.l.b.entries();a.f=0;a.h=[];a.i=null;return a};function B(a,b){return(a=a.b.get(b))?a:[]}function A(a){var b;null==a?b=0:b=Ha(a)|0;return b};function sb(){}l(sb,n);sb.prototype.b=function(){return!this.h.done};sb.prototype.a=function(){this.l=this.h;this.h=this.i.next();var a=new tb,b=this.l,c=this.f.b;a.b=this.f;a.a=b;a.c=c;return a};sb.prototype.c=function(){ub(this.f,this.l.value[0])};function D(){}l(D,n);D.prototype.C=function(a){return null!=a&&a.M?u(this.m(),a.m())&&u(this.o(),a.o()):!1};D.prototype.A=function(){return w(this.m())^w(this.o())};D.prototype.toString=function(){return q(this.m())+"="+q(this.o())};D.prototype.M=!0;function tb(){this.c=0}l(tb,D);tb.prototype.m=function(){return this.a.value[0]};tb.prototype.o=function(){return this.b.b!=this.c?this.b.a.get(this.a.value[0]):this.a.value[1]};tb.prototype.ga=function(a){return vb(this.b,this.a.value[0],a)};function wb(){this.b=this.c=0}l(wb,n);function vb(a,b,c){var d=a.a.get(b);a.a.set(b,void 0===c?null:c);void 0===d?a.c=a.c+1|0:a.b=a.b+1|0;return d}function ub(a,b){if(void 0===a.a.get(b))a.b=a.b+1|0;else{var c=a.a;c["delete"].call(c,b);a.c=a.c-1|0}}wb.prototype.g=function(){var a=new sb;a.f=this;a.i=a.f.a.entries();a.h=a.i.next();return a};function xb(){}l(xb,eb);g=xb.prototype;g.I=function(){yb(this)};function yb(a){var b=new pb;b.b=new Map;b.c=a;a.a=b;b=new wb;b.a=new Map;b.f=a;a.b=b}g.F=function(a){var b;zb(a)?b=null==a?!!rb(null,B(this.a,A(null))):void 0!==this.b.a.get(a):b=!!rb(a,B(this.a,A(a)));return b};g.da=function(a){return Ab(a,this.b)||Ab(a,this.a)};function Ab(a,b){for(b=b.g();b.b();){var c=b.a().o();if(u(a,c))return!0}return!1}g.B=function(){var a=new mb;a.a=this;return a};
g.get=function(a){var b;zb(a)?b=null==a?hb(rb(null,B(this.a,A(null)))):this.b.a.get(a):b=hb(rb(a,B(this.a,A(a))));return b};g.K=function(a,b){var c;zb(a)?c=null==a?qb(this.a,null,b):vb(this.b,a,b):c=qb(this.a,a,b);return c};g.L=function(a){zb(a)?null==a?ob(this.a,null):ub(this.b,a):ob(this.a,a)};g.D=function(){return this.a.a+this.b.c|0};function Bb(){}l(Bb,xb);function Cb(){var a=new Bb;yb(a);return a};function Db(){}l(Db,y);function Eb(){var a=new Db;a.a=Cb();return a}g=Db.prototype;g.add=function(a){return null==this.a.K(a,this)};g.s=function(){this.a.I()};g.u=function(a){return this.a.F(a)};g.O=function(){return 0==this.a.D()};g.g=function(){return this.a.ma().g()};g.H=function(a){this.a.L(a)};g.j=function(){return this.a.D()};g.aa=!0;function Va(a){var b=0;for(a=a.g();a.b();){var c=a.a();b=b+w(c)|0;b|=0}return b};function Ua(){}l(Ua,qa);function x(){this.h=this.f=0}l(x,n);x.prototype.b=function(){return this.f<this.i.j()};x.prototype.a=function(){var a;this.b();return this.i.U(this.h=(a=this.f,this.f=this.f+1|0,a))};x.prototype.c=function(){this.i.R(this.h);this.f=this.h;this.h=-1};function Qa(){x.call(this)}l(Qa,x);function Ra(a,b,c){Ga();c=c?c:Fa;Fb(a.slice(0,b),a,0,b,0,c)}
function Fb(a,b,c,d,e,f){if(7>(d-c|0)){a=c;for(var k=a+1|0;k<d;k=k+1|0)for(var h=k;h>a&&0<f.a(b[h-1|0],b[h]);h=h-1|0){var v=b[h];b[h]=b[h-1|0];b[h-1|0]=v}}else if(v=c+e|0,k=d+e|0,h=v+((k-v|0)>>1)|0,Fb(b,a,v,h,-e|0,f),Fb(b,a,h,k,-e|0,f),0>=f.a(a[h-1|0],a[h]))for(;c<d;)f=h=void 0,k=(h=c,c=c+1|0,h),h=a[f=v,v=v+1|0,f],b[k]=h;else for(e=h;c<d;)if(e>=k||v<h&&0>=f.a(a[v],a[e])){var C=void 0,P=void 0,kb=(C=c,c=c+1|0,C);C=a[P=v,v=v+1|0,P];b[kb]=C}else P=C=void 0,kb=(C=c,c=c+1|0,C),C=a[P=e,e=e+1|0,P],b[kb]=
C};function Ea(a,b){return a<b?-1:a>b?1:a==b?0==a?Ea(1/a,1/b):0:isNaN(a)?isNaN(b)?0:1:-1};function Ha(a){if(a.A)return a.A();var b=typeof a;if("number"==b)b=t(a);else if("boolean"==b)b=a?1231:1237;else if("string"==b){Gb();b=":"+q(a);var c=Hb[b];if(null!=c)b=t(c);else{c=Ib[b];if(null==c){var d=0;c=a.length;for(var e=c-4|0,f=0;f<e;)d=a.charCodeAt(f+3|0)+Math.imul(31,a.charCodeAt(f+2|0)+Math.imul(31,a.charCodeAt(f+1|0)+Math.imul(31,a.charCodeAt(f)+Math.imul(31,d))))|0,d|=0,f=f+4|0;for(;f<c;){e=void 0;d=Math.imul(d,31);var k=(e=f,f=f+1|0,e);d=d+a.charCodeAt(k)|0}a=d|0}else a=t(c);256==Jb&&
(Ib=Hb,Hb=new n,Jb=0);Jb=Jb+1|0;b=Hb[b]=a}}else b=ka(a);return b};var Hb,Ib;function Gb(){Gb=function(){};Ib=new n;Jb=0;Hb=new n}var Jb=0;function Kb(){}l(Kb,qa);function La(a){var b=new Kb;b.b=a;oa(b);b.c(Error(b));return b};function Lb(){}l(Lb,n);function q(a){if(null==a)a="null";else if(Array.isArray(a)){var b=a.S;a=la(b?ma(b.V,b.T):ma(n,1))+"@"+(ka(a)>>>0).toString(16)}else a=a.toString();return a}function zb(a){return"string"===typeof a};function Mb(a,b){this.b=a;this.a=b}l(Mb,n);function la(a){var b=ia(a.b);0!=a.a&&(b="L"+q(b)+";");a=a.a;for(var c="",d=0;d<a;d=d+1|0)c=q(c)+"[";return q(c)+q(b)}Mb.prototype.toString=function(){return"class "+q(la(this))};function ma(a,b){var c=b||0;return ha(a.prototype,"$$class/"+c,function(){return new Mb(a,c)})};function Nb(a,b){a.rooms=b};var E;function Ob(){Ob=function(){};E=m.document};function Pb(a){this.a=a}l(Pb,n);Pb.prototype.handleEvent=function(a){var b=this.a;b(a)};function F(a){return new Pb(a)};function Qb(){this.f=this.c=this.b=this.a=0;this.v=this.J=this.h=!1}l(Qb,n);function Rb(a,b){var c=new Qb;c.h=!0;c.i="regular";c.Y=[];c.l=a;c.c=Math.sqrt(b);c.f=Math.sqrt(b);return c};function Sb(){this.c=0}l(Sb,n);function Tb(a,b,c){var d=new Sb;d.a=a;d.b=b;d.c=c;return d};function Ub(){}l(Ub,n);function Vb(){var a=new Ub;a.a=wa([(G(),400),400],Lb,zb,Lb.a);return a};var H,I,Wb,J,Xb,Yb,K,L,M,Zb,$b,ac,bc,N,O,cc,dc;function ec(){G();return{}}function fc(){for(var a=[],b=H.g();b.b();){var c=b.a();a.push(c)}return a}function gc(a){G();a=a.rooms;H.s();I.I();for(var b=0;b<a.length;b++){var c=a[b];var d=Rb(c.name,c.width*c.height);d.a=c.x;d.b=c.y;d.c=c.width;d.f=c.height;d.P=c.color;d.h=c.partOfHouse;c.openPlan?d.i="open plan":d.i=c.type;d.J=c.permissiveOverlap;d.v=c.connector;d.Y=c.acceptsAsConnector;c=d;H.add(c);I.K(c.l,c)}Q();R();S();T()}
function hc(){var a=ec();a.name="test";Nb(a,fc().map(function(b){var c=ec();c.name=b.l;c.x=b.a;c.y=b.b;c.width=b.c;c.height=b.f;c.color=b.P;c.partOfHouse=b.h;c.type=b.i;c.permissiveOverlap=b.J;c.connector=b.v;c.acceptsAsConnector=b.Y.slice();return c}));return a}function S(){for(var a=0,b=H.g();b.b();){var c=b.a();c.h&&(a+=c.c*c.f)}$b.textContent=q(ic(a))+" sqft"}
function T(){if(1!=J.j())ac.style.display="none",Wb.value="",bc.textContent="";else{ac.style.display="block";var a=J.g().a();Wb.value=a.l;Xb.value=a.i;bc.textContent=q(ic(a.c))+"x"+q(ic(a.f))+" ("+q(ic(a.c*a.f))+" sqft)"}}function ic(a){return(new Number(a)).toFixed(za(1))}
function jc(){for(var a=H.g();a.b();){var b=a.a();if(b.h){var c=b.c/2,d=b.f/2,e=Math.round(2*(b.a-c));c=Math.round(2*(b.a+c));var f=Math.round(2*(b.b-d));d=Math.round(2*(b.b+d));b.a=(e+c|0)/4;b.b=(f+d|0)/4;b.c=(c-e|0)/2;b.f=(d-f|0)/2}}S();T()}function kc(a){var b=Rb(a.l,a.c*a.f);b.a=a.a;b.b=a.b;b.P=a.P;b.c=a.c;b.f=a.f;b.i=a.i;b.v=a.v;b.h=a.h;return b}
function lc(a,b){G();H.W(new Ca(function(f,k){return Ea(f.c*f.f,k.c*k.f)}));for(var c=H.g();c.b();){var d=c.a();if(d.h){var e=Math.abs(d.b-b);if(Math.abs(d.a-a)<d.c/2&&e<d.f/2)return d}}return null}function mc(a,b){I.F(a)&&I.F(b)&&I.get(a).Y.push(b)}function nc(a){if(a=I.get(a))a.J=!0}function oc(a){if(a=I.get(a))a.v=!0}function pc(a){if(a=I.get(a))a.h=!1}function U(a){if(a=I.get(a))a.i="open plan"}
function R(){G();N.save();N.fillStyle="rgb(128, 192, 128)";N.fillRect(0,0,1200,1200);N.translate(V+600,-W+600);N.translate(-3.25,-3.25);for(var a=0;400>a;a=a+1|0)for(var b=0;400>b;b=b+1|0){var c=O.a[a][b];null!=c&&(N.fillStyle="outer wall"===c?"black":"inner wall"===c?"gray":"white",N.fillRect(Math.round(6.5*(a-200|0)),Math.round(6.5*(b-200|0)),7,7))}N.translate(3.25,3.25);for(a=H.g();a.b();){b=a.a();var d=b.c/2,e=b.f/2;c=Math.round(2*(b.a-d))+1|0;d=Math.round(2*(b.a+d));var f=Math.round(2*(b.b-e))+
1|0;e=Math.round(2*(b.b+e));J.u(b)&&(N.translate(-3.25,-3.25),N.fillStyle="rgba(0, 0, 0, 0.125)",N.fillRect(Math.round(6.5*c),Math.round(6.5*f),Math.round(6.5*(d-c|0)),Math.round(6.5*(e-f|0))),N.translate(3.25,3.25))}N.strokeStyle="rgb(0, 0, 128, 0.25)";for(a=cc.g();a.b();)b=a.a(),N.beginPath(),N.lineWidth=13*b.c/2,c=b.a,e=c.c/2,d=c.f/2,N.moveTo(t((Math.round(6.5*Math.round(2*(c.a-e)))+Math.round(6.5*Math.round(2*(c.a+e)))|0)/2),t((Math.round(6.5*Math.round(2*(c.b-d)))+Math.round(6.5*Math.round(2*
(c.b+d)))|0)/2)),b=b.b,c=b.c/2,e=b.f/2,N.lineTo(t((Math.round(6.5*Math.round(2*(b.a-c)))+Math.round(6.5*Math.round(2*(b.a+c)))|0)/2),t((Math.round(6.5*Math.round(2*(b.b-e)))+Math.round(6.5*Math.round(2*(b.b+e)))|0)/2)),N.closePath(),N.stroke();N.fillStyle="black";N.textAlign="center";for(a=H.g();a.b();)b=a.a(),N.font=p(L,b)?t(16.25)+"px bold Arial":t(13)+"px plain Arial",c=b.c/2,e=b.f/2,N.fillText(b.l,t((Math.round(6.5*Math.round(2*(b.a-c)))+Math.round(6.5*Math.round(2*(b.a+c)))|0)/2),t((Math.round(6.5*
Math.round(2*(b.b-e)))+Math.round(6.5*Math.round(2*(b.b+e)))|0)/2));N.restore()}
function Q(){G();O=Vb();for(var a=H.g();a.b();){var b=a.a();if(b.h){var c=b.c/2,d=b.f/2,e=Math.round(2*(b.a-c))+200|0;c=Math.round(2*(b.a+c))+200|0;var f=Math.round(2*(b.b+d))+200|0;for(b=Math.round(2*(b.b-d))+200|0;b<=f;b=b+1|0)for(d=e;d<=c;d=d+1|0)O.a[d][b]="foundation"}}for(a=1;399>a;a=a+1|0)for(e=1;399>e;e=e+1|0)if(null!=O.a[a][e]&&"foundation"===O.a[a][e]){c=!1;for(f=-1;2>f;f=f+1|0)for(b=-1;2>b;b=b+1|0)if(null==O.a[a+f|0][e+b|0]){c=!0;break}c&&(O.a[a][e]="outer wall")}for(a=H.g();a.b();)if(e=
a.a(),e.h&&"open plan"!==e.i){c=e.c/2;f=e.f/2;for(b=0;b<=e.c;b+=.5){d=Math.round(2*(e.a+b-c))+200|0;var k=Math.round(2*(e.b-f))+200|0;"foundation"===O.a[d][k]&&(O.a[d][k]="inner wall")}for(b=0;b<=e.c;b+=.5)d=Math.round(2*(e.a+b-c))+200|0,k=Math.round(2*(e.b+f))+200|0,"foundation"===O.a[d][k]&&(O.a[d][k]="inner wall");for(b=0;b<=e.f;b+=.5)d=Math.round(2*(e.a-c))+200|0,k=Math.round(2*(e.b+b-f))+200|0,"foundation"===O.a[d][k]&&(O.a[d][k]="inner wall");for(b=0;b<=e.f;b+=.5)d=Math.round(2*(e.a+c))+200|
0,k=Math.round(2*(e.b+b-f))+200|0,"foundation"===O.a[d][k]&&(O.a[d][k]="inner wall")}for(a=H.g();a.b();){c=a.a();if(e=c.h)e=p(c.i,"wall".toString());if(e)for(f=c.c/2,d=c.f/2,e=Math.round(2*(c.a-f))+200|0,f=Math.round(2*(c.a+f))+200|0,b=Math.round(2*(c.b+d))+200|0,c=Math.round(2*(c.b-d))+200|0;c<=b;c=c+1|0)for(d=e;d<=f;d=d+1|0)O.a[d][c]="inner wall"}for(a=H.g();a.b();){c=a.a();if(e=c.h)e=p(c.i,"cut out".toString());if(e)for(f=c.c/2,d=c.f/2,e=Math.round(2*(c.a-f))+200|0,f=Math.round(2*(c.a+f))+200|
0,b=Math.round(2*(c.b+d))+200|0,c=Math.round(2*(c.b-d))+200|0;c<=b;c=c+1|0)for(d=e;d<=f;d=d+1|0)O.a[d][c]="foundation"}}
function qc(){G();I.get("front yard").a=0;I.get("front yard").b=-50;I.get("back yard").a=0;I.get("back yard").b=50;if(rc)for(var a=H.g();a.b();)for(var b=a.a(),c=H.g();c.b();){var d=c.a();if(!p(b,d)){var e=(b.c+d.c)/2,f=sc(b,d);if(!(f>e)){var k=e-f;if(b.J||d.J)k=.5;e=d.a-b.a;var h=d.b-b.b;e/=f;h/=f;f=.1*.4*k;b.a-=f*e;d.a+=f*e;b.b-=f*h;d.b+=f*h}}}if(tc)for(a=cc.g();a.b();)e=a.a(),b=e.a,c=e.b,h=sc(b,c),d=b.a-c.a,f=b.b-c.b,d/=h,f/=h,e=.03*e.c,b.a-=e*d,c.a+=e*d,b.b-=e*f,c.b+=e*f;if(uc)for(a=H.g();a.b();)for(b=
a.a(),c=H.g();c.b();)d=c.a(),p(b,d)||(h=sc(b,d),f=b.a-d.a,e=b.b-d.b,f/=h,e/=h,h=.003/h,b.a-=h*f,d.a+=h*f,b.b-=h*e,d.b+=h*e);vc&&(wc(1),wc(2));if(xc)for(a=dc.g();a.b();)c=a.a(),b=c.a,c=c.b,e=sc(b,c),d=c.a-b.a,f=c.b-b.b,d/=e,f/=e,e=.1*.1,b.a-=e*d,c.a+=e*d,b.b-=e*f,c.b+=e*f;if(yc)for(a=H.g();a.b();)for(b=a.a(),c=H.g();c.b();)d=c.a(),p(b,d)||(k=(b.c+d.c)/2,f=d.a-b.a,e=d.b-b.b,h=k-Math.abs(f),k-=Math.abs(e),0>h||0>k||(h<k?(e=h/2,b.a-=e*Math.sign(f),d.a+=e*Math.sign(f)):(f=k/2,b.b-=f*Math.sign(e),d.b+=
f*Math.sign(e))))}
function wc(a){G();for(var b=H.g();b.b();)for(var c=b.a(),d=H.g();d.b();){var e=d.a();if(!p(c,e)&&c.h&&e.h){var f=c.c<e.c?e:c;e=c.c<e.c?c:e;var k=(f.c+e.c)/2,h=k-Math.abs(e.a-f.a);k-=Math.abs(e.b-f.b);if(!(-.5>h||-.5>k)){if(1>h){var v=f.b-f.c/2;h=e.b+e.c/2;var C=f.b+f.c/2,P=e.b-e.c/2;v>h||C<P||(v-=P,h=C-h,Math.abs(v)<Math.abs(h)&&Math.abs(v)<a&&.1<Math.abs(v)&&(e.b+=v/5),Math.abs(v)>Math.abs(h)&&Math.abs(h)<a&&.1<Math.abs(h)&&(e.b+=h/5))}1>k&&(h=f.a-f.c/2,k=e.a+e.c/2,f=f.a+f.c/2,C=e.a-e.c/2,h>k||
f<C||(h-=C,f-=k,Math.abs(h)<Math.abs(f)&&Math.abs(h)<a&&.1<Math.abs(h)&&(e.a+=h/5),Math.abs(h)>Math.abs(f)&&Math.abs(f)<a&&.1<Math.abs(f)&&(e.a+=f/5)))}}}}function sc(a,b){G();return Math.sqrt(Math.pow(a.a-b.a,za(2))+Math.pow(a.b-b.b,za(2)))}function X(a,b,c){a=I.get(a);b=I.get(b);a&&b&&cc.add(Tb(a,b,c))}function zc(a,b){a=I.get(a);b=I.get(b);a&&b&&dc.add(Tb(a,b,.3))}
function Y(a,b){a=Rb(a,b);a.P="rgba("+t(255*Math.random())+", "+t(255*Math.random())+", "+t(255*Math.random())+", 0.125)";H.add(a);I.K(a.l,a);return a}function Z(a){G();M=a;N.canvas.style.cursor=a}
function G(){G=function(){};H=Ta();I=Cb();cc=Ta();dc=Ta();K=(Ob(),E).getElementById("canvas");N=K.getContext("2d");$b=E.getElementById("layout-indoor-space-value");ac=E.getElementById("room-inspector");Wb=E.getElementById("room-name-value");Xb=E.getElementById("room-type-value");bc=E.getElementById("room-size-value");Yb=m.window.localStorage;Ac=Bc=-1;Zb=Ta();J=Eb();L=null;O=Vb();rc=!0;yc=!1;uc=xc=!0;vc=!1;tc=!0}var Bc=0,Ac=0,V=0,W=0,Cc=!1,rc=!1,yc=!1,xc=!1,uc=!1,vc=!1,tc=!1;G();Y("guest bedroom 4",Math.imul(12,12));Y("guest bedroom 2",Math.imul(12,12));Y("guest bathroom",Math.imul(8,8));Y("garage",Math.imul(20,20));Y("laundry room",Math.imul(8,8));Y("back yard",Math.imul(32,32));Y("front yard",Math.imul(32,32));Y("living room",Math.imul(16,16));Y("master bedroom",Math.imul(16,16));Y("dining room",Math.imul(12,12));Y("kitchen",Math.imul(12,12));Y("foyer",Math.imul(8,8));Y("public bathroom",Math.imul(8,8));Y("master bathroom",Math.imul(8,8));
Y("walk in closet",Math.imul(8,8));Y("coat closet",Math.imul(4,4));X("foyer","front yard",1.3);X("living room","hall 1",1.3);X("hall 1","hall 2",1.3);X("hall 2","hall 3",1.3);X("hall 3","hall 4",1.3);X("hall 4","hall 5",1.3);X("foyer","coat closet",1);X("master bedroom","master bathroom",1);X("master bedroom","walk in closet",1);X("living room","kitchen",.7);X("kitchen","dining room",.7);X("foyer","living room",.7);X("foyer","dining room",.7);X("living room","dining room",.7);
X("dining room","back yard",.7);X("living room","master bedroom",.7);X("garage","foyer",.7);X("hall 1","living room",.7);X("garage","front yard",.7);X("hall 1","guest bedroom 1",.7);X("hall 3","guest bedroom 2",.7);X("hall 5","guest bedroom 1",.7);X("public bathroom","foyer",.3);X("public bathroom","living room",.3);X("master bedroom","back yard",.3);X("laundry room","garage",.3);X("kitchen","laundry room",.3);X("master bedroom","laundry room",.3);X("master bathroom","walk in closet",.3);
X("laundry room","master bedroom",.3);X("guest bedroom 1","living room",.3);X("guest bedroom 2","living room",.3);X("guest bedroom 3","living room",.3);X("guest bedroom 1","guest bedroom 2",.3);X("guest bedroom 2","guest bedroom 3",.3);X("guest bedroom 3","guest bedroom 1",.3);X("guest bathroom","guest bedroom 1",.3);X("guest bathroom","guest bedroom 2",.3);X("guest bathroom","guest bedroom 3",.3);H.W(new Ca(function(a,b){return-Ea(a.c*a.f,b.c*b.f)|0}));zc("front yard","back yard");zc("kitchen","front yard");
zc("master","front yard");U("living room");U("kitchen");U("foyer");U("hall 1");U("hall 2");U("hall 3");U("hall 4");U("hall 5");pc("front yard");pc("back yard");nc("front yard");nc("back yard");oc("foyer");oc("living room");oc("dining room");oc("kitchen");mc("foyer","front yard");mc("master bathroom","master bedroom");mc("walk in closet","master bedroom");mc("guest bathroom","guest bedroom 1");mc("guest bathroom","guest bedroom 2");
for(var Dc=H.g();Dc.b();){var Ec=Dc.a();Ec.a=-50+100*Math.random();Ec.b=-50+100*Math.random()}rc=!0;yc=!1;uc=xc=!0;vc=!1;tc=!0;for(var Fc=0;500>Fc;Fc=Fc+1|0)qc();for(var Gc=0;500>Gc;Gc=Gc+1|0)qc();for(var Hc=0;500>Hc;Hc=Hc+1|0)qc();rc=!1;uc=yc=!0;vc=!1;tc=!0;for(var Ic=0;500>Ic;Ic=Ic+1|0)qc();rc=!1;yc=!0;uc=!1;tc=vc=!0;for(var Jc=0;500>Jc;Jc=Jc+1|0)qc();rc=!1;yc=!0;uc=!1;tc=vc=!0;for(var Kc=0;500>Kc;Kc=Kc+1|0)qc();jc();
for(var Lc=0,Mc=0,Nc=0,Oc=H.g();Oc.b();){var Pc=Oc.a();if(Pc.h)for(var Qc=0;Qc<Pc.c*Pc.f;Qc=Qc+1|0)Lc+=Pc.a,Mc+=Pc.b,Nc=Nc+1|0}V=Lc/Nc;W=Mc/Nc;W=V=0;
(function(){Wb.addEventListener("input",F(function(){1==J.j()&&(J.g().a().l=Wb.value,R())}));Xb.addEventListener("input",F(function(){1==J.j()&&(J.g().a().i=Xb.value,Q(),R())}));for(var a={},b=1;5>=b;a={N:a.N},b=b+1|0)a.N=b,(Ob(),E).getElementById("layout-save-button-"+b).addEventListener("click",F(function(c){return function(){var d=hc();d=m.JSON.stringify(d);Yb.setItem("saved-layout-slot-"+c.N,d);m.console.log("saved "+q(d))}}(a))),E.getElementById("layout-load-button-"+b).addEventListener("click",
F(function(c){return function(){var d=Yb.getItem("saved-layout-slot-"+c.N);null!=d&&(gc(m.JSON.parse(d)),m.console.log("loaded "+q(d)))}}(a)));(Ob(),E).getElementById("layout-load-json-button").addEventListener("click",F(function(){var c=m.window.prompt("Enter layout JSON.");null!=c&&(gc(m.JSON.parse(c)),m.console.log("loaded "+q(c)))}));K.addEventListener("mousedown",F(function(){Cc=!0}));K.addEventListener("mouseup",F(function(){Cc=!1}));K.addEventListener("contextmenu",F(function(c){c.bubbles=
!1;c.preventDefault();var d=c.currentTarget.getBoundingClientRect(),e=(c.x-d.left-600)/13+V;c=(c.y-d.top-600)/13+W;J.s();L?(H.H(L),I.L(L.l)):(L=Y("",Math.imul(8,8)),L.a=e,L.b=c,H.add(L),I.K(L.l,L));Q();R();S();T()}));K.addEventListener("mousedown",F(function(c){c.bubbles=!1;var d=c.currentTarget.getBoundingClientRect(),e=c.shiftKey||c.ctrlKey;c=lc((c.x-d.left-600)/13+V,(c.y-d.top-600)/13+W);e||J.u(c)||(J.s(),T());c&&(e&&J.u(c)?J.H(c):J.add(c),T());R()}));K.addEventListener("mouseup",F(function(c){c.bubbles=
!1;H.O()||(jc(),Q(),R())}));K.addEventListener("mousemove",F(function(c){c.bubbles=!1;var d=c.currentTarget.getBoundingClientRect(),e=c.x-d.left,f=c.y-d.top;c=e-Bc;d=f-Ac;Bc=e;Ac=f;if(Cc){if(!J.O()){for(e=J.g();e.b();)if(f=e.a(),"nw-resize"===M&&(f.b+=d/13/2,f.f-=d/13,f.a+=c/13/2,f.c-=c/13),"ne-resize"===M&&(f.b+=d/13/2,f.f-=d/13,f.a+=c/13/2,f.c+=c/13),"sw-resize"===M&&(f.b+=d/13/2,f.f+=d/13,f.a+=c/13/2,f.c-=c/13),"se-resize"===M&&(f.b+=d/13/2,f.f+=d/13,f.a+=c/13/2,f.c+=c/13),"w-resize"===M&&(f.a+=
c/13/2,f.c-=c/13),"e-resize"===M&&(f.a+=c/13/2,f.c+=c/13),"n-resize"===M&&(f.b+=d/13/2,f.f-=d/13),"s-resize"===M&&(f.b+=d/13/2,f.f+=d/13),"move"===M||"auto"===M)f.a+=c/13,f.b+=d/13;Q();R();S();T()}}else d=(e-600)/13+V,e=(f-600)/13+W,c=lc(d,e),p(c,L)||(L=c,R()),L?(c=1>d-(L.a-L.c/2),d=1>L.a+L.c/2-d,f=1>e-(L.b-L.f/2),e=1>L.b+L.f/2-e,c&&f?Z("nw-resize"):d&&f?Z("ne-resize"):c&&e?Z("sw-resize"):d&&e?Z("se-resize"):c?Z("w-resize"):d?Z("e-resize"):f?Z("n-resize"):e?Z("s-resize"):Z("move")):Z("auto")}));K.addEventListener("keydown",
F(function(c){c.bubbles=!1;var d=c.code;if("ArrowRight"===d){for(c=J.g();c.b();)c.a().a+=.5;Q();R()}else if("ArrowLeft"===d){for(c=J.g();c.b();)c.a().a-=.5;Q();R()}else if("ArrowUp"===d){for(c=J.g();c.b();)c.a().b-=.5;Q();R()}else if("ArrowDown"===d){for(c=J.g();c.b();)c.a().b+=.5;Q();R()}else if("Delete"===d)H.ia(J),J.s(),Q(),R(),S(),T();else if("KeyC"===d&&c.ctrlKey)for(Zb.s(),c=J.g();c.b();)d=c.a(),Zb.add(kc(d));else if("KeyV"===d&&c.ctrlKey){for(c=Zb.g();c.b();)d=c.a(),d.a+=4,d.b+=4;c=Ta();for(d=
Zb.g();d.b();){var e=d.a();c.add(kc(e))}H.X(c);J.s();J.X(c);Q();R();S();T()}else if("KeyA"===d&&c.ctrlKey){J.s();for(c=H.g();c.b();)d=c.a(),d.h&&J.add(d);R();T()}}))})();Q();R();S();T();
